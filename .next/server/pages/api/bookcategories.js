"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/bookcategories";
exports.ids = ["pages/api/bookcategories"];
exports.modules = {

/***/ "next-sanity":
/*!******************************!*\
  !*** external "next-sanity" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("next-sanity");

/***/ }),

/***/ "(api)/./libs/sanity.js":
/*!************************!*\
  !*** ./libs/sanity.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"urlFor\": () => (/* binding */ urlFor),\n/* harmony export */   \"usePreviewSubscription\": () => (/* binding */ usePreviewSubscription),\n/* harmony export */   \"sanityClient\": () => (/* binding */ sanityClient),\n/* harmony export */   \"previewClient\": () => (/* binding */ previewClient),\n/* harmony export */   \"getClient\": () => (/* binding */ getClient)\n/* harmony export */ });\n/* harmony import */ var next_sanity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-sanity */ \"next-sanity\");\n/* harmony import */ var next_sanity__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_sanity__WEBPACK_IMPORTED_MODULE_0__);\n\nconst config = {\n    projectId: \"1pxkipll\",\n    dataset: \"production\",\n    useCdn: true\n};\nif (!config.projectId) {\n    throw Error(\"The Project ID is not set. Check your environment variables.\");\n}\nif (!config.dataset) {\n    throw Error(\"The dataset name is not set. Check your environment variables.\");\n}\n/**\n   * Set up a helper function for generating Image URLs with only the asset reference data in your documents.\n   * Read more: https://www.sanity.io/docs/image-url\n   **/ const urlFor = (source)=>(0,next_sanity__WEBPACK_IMPORTED_MODULE_0__.createImageUrlBuilder)(config).image(source)\n;\n// Set up the live preview subsscription hook\nconst usePreviewSubscription = (0,next_sanity__WEBPACK_IMPORTED_MODULE_0__.createPreviewSubscriptionHook)(config);\n// // Set up Portable Text serialization\n// export const PortableText = createPortableTextComponent({\n//   ...config,\n//   // Serializers passed to @sanity/block-content-to-react\n//   // (https://github.com/sanity-io/block-content-to-react)\n//   serializers: {},\n// });\n// Set up the client for fetching data in the getProps page functions\nconst sanityClient = (0,next_sanity__WEBPACK_IMPORTED_MODULE_0__.createClient)(config);\n// Set up a preview client with serverless authentication for drafts\nconst previewClient = (0,next_sanity__WEBPACK_IMPORTED_MODULE_0__.createClient)({\n    ...config,\n    useCdn: false\n});\n// Helper function for easily switching between normal client and preview client\nconst getClient = (usePreview)=>usePreview ? previewClient : sanityClient\n;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWJzL3Nhbml0eS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBTXNCO0FBRXBCLEtBQUssQ0FBQ0ksTUFBTSxHQUFHLENBQUM7SUFDWkMsU0FBUyxFQUFFQyxVQUF5QztJQUNwREcsT0FBTyxFQUFFSCxZQUFzQztJQUNqREssTUFBTSxFQUFFLElBQUk7QUFDZCxDQUFDO0FBRUQsRUFBRSxHQUFHUCxNQUFNLENBQUNDLFNBQVMsRUFBRSxDQUFDO0lBQ3RCLEtBQUssQ0FBQ08sS0FBSyxDQUFDLENBQThEO0FBQzVFLENBQUM7QUFDRCxFQUFFLEdBQUdSLE1BQU0sQ0FBQ0ssT0FBTyxFQUFFLENBQUM7SUFDcEIsS0FBSyxDQUFDRyxLQUFLLENBQUMsQ0FBZ0U7QUFDOUUsQ0FBQztBQUVELEVBR0k7OztJQUFBLEdBQ0csS0FBSyxDQUFDQyxNQUFNLElBQUlDLE1BQU0sR0FBS2Isa0VBQXFCLENBQUNHLE1BQU0sRUFBRVcsS0FBSyxDQUFDRCxNQUFNOztBQUU1RSxFQUE2QztBQUN0QyxLQUFLLENBQUNFLHNCQUFzQixHQUFHYiwwRUFBNkIsQ0FBQ0MsTUFBTTtBQUUxRSxFQUF3QztBQUN4QyxFQUE0RDtBQUM1RCxFQUFlO0FBQ2YsRUFBNEQ7QUFDNUQsRUFBNkQ7QUFDN0QsRUFBcUI7QUFDckIsRUFBTTtBQUVOLEVBQXFFO0FBQzlELEtBQUssQ0FBQ2EsWUFBWSxHQUFHakIseURBQVksQ0FBQ0ksTUFBTTtBQUMvQyxFQUFvRTtBQUU3RCxLQUFLLENBQUNjLGFBQWEsR0FBR2xCLHlEQUFZLENBQUMsQ0FBQztPQUN0Q0ksTUFBTTtJQUNUTyxNQUFNLEVBQUUsS0FBSztBQUNmLENBQUM7QUFFRCxFQUFnRjtBQUN6RSxLQUFLLENBQUNRLFNBQVMsSUFBSUMsVUFBVSxHQUNsQ0EsVUFBVSxHQUFHRixhQUFhLEdBQUdELFlBQVkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ib29rc2FwaS8uL2xpYnMvc2FuaXR5LmpzPzdiNGMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQge1xuICAgIGNyZWF0ZUNsaWVudCxcbiAgICBjcmVhdGVJbWFnZVVybEJ1aWxkZXIsXG4gICAgY3JlYXRlUG9ydGFibGVUZXh0Q29tcG9uZW50LFxuICAgIGNyZWF0ZVByZXZpZXdTdWJzY3JpcHRpb25Ib29rLFxuICB9IGZyb20gXCJuZXh0LXNhbml0eVwiO1xuICBcbiAgY29uc3QgY29uZmlnID0ge1xuICAgICAgcHJvamVjdElkOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TQU5JVFlfUFJPSkVDVF9JRCxcbiAgICAgIGRhdGFzZXQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NBTklUWV9EQVRBU0VULFxuICAgIHVzZUNkbjogdHJ1ZVxuICB9O1xuICBcbiAgaWYgKCFjb25maWcucHJvamVjdElkKSB7XG4gICAgdGhyb3cgRXJyb3IoXCJUaGUgUHJvamVjdCBJRCBpcyBub3Qgc2V0LiBDaGVjayB5b3VyIGVudmlyb25tZW50IHZhcmlhYmxlcy5cIik7XG4gIH1cbiAgaWYgKCFjb25maWcuZGF0YXNldCkge1xuICAgIHRocm93IEVycm9yKFwiVGhlIGRhdGFzZXQgbmFtZSBpcyBub3Qgc2V0LiBDaGVjayB5b3VyIGVudmlyb25tZW50IHZhcmlhYmxlcy5cIik7XG4gIH1cbiAgXG4gIC8qKlxuICAgKiBTZXQgdXAgYSBoZWxwZXIgZnVuY3Rpb24gZm9yIGdlbmVyYXRpbmcgSW1hZ2UgVVJMcyB3aXRoIG9ubHkgdGhlIGFzc2V0IHJlZmVyZW5jZSBkYXRhIGluIHlvdXIgZG9jdW1lbnRzLlxuICAgKiBSZWFkIG1vcmU6IGh0dHBzOi8vd3d3LnNhbml0eS5pby9kb2NzL2ltYWdlLXVybFxuICAgKiovXG4gIGV4cG9ydCBjb25zdCB1cmxGb3IgPSAoc291cmNlKSA9PiBjcmVhdGVJbWFnZVVybEJ1aWxkZXIoY29uZmlnKS5pbWFnZShzb3VyY2UpO1xuICBcbiAgLy8gU2V0IHVwIHRoZSBsaXZlIHByZXZpZXcgc3Vic3NjcmlwdGlvbiBob29rXG4gIGV4cG9ydCBjb25zdCB1c2VQcmV2aWV3U3Vic2NyaXB0aW9uID0gY3JlYXRlUHJldmlld1N1YnNjcmlwdGlvbkhvb2soY29uZmlnKTtcbiAgXG4gIC8vIC8vIFNldCB1cCBQb3J0YWJsZSBUZXh0IHNlcmlhbGl6YXRpb25cbiAgLy8gZXhwb3J0IGNvbnN0IFBvcnRhYmxlVGV4dCA9IGNyZWF0ZVBvcnRhYmxlVGV4dENvbXBvbmVudCh7XG4gIC8vICAgLi4uY29uZmlnLFxuICAvLyAgIC8vIFNlcmlhbGl6ZXJzIHBhc3NlZCB0byBAc2FuaXR5L2Jsb2NrLWNvbnRlbnQtdG8tcmVhY3RcbiAgLy8gICAvLyAoaHR0cHM6Ly9naXRodWIuY29tL3Nhbml0eS1pby9ibG9jay1jb250ZW50LXRvLXJlYWN0KVxuICAvLyAgIHNlcmlhbGl6ZXJzOiB7fSxcbiAgLy8gfSk7XG4gIFxuICAvLyBTZXQgdXAgdGhlIGNsaWVudCBmb3IgZmV0Y2hpbmcgZGF0YSBpbiB0aGUgZ2V0UHJvcHMgcGFnZSBmdW5jdGlvbnNcbiAgZXhwb3J0IGNvbnN0IHNhbml0eUNsaWVudCA9IGNyZWF0ZUNsaWVudChjb25maWcpO1xuICAvLyBTZXQgdXAgYSBwcmV2aWV3IGNsaWVudCB3aXRoIHNlcnZlcmxlc3MgYXV0aGVudGljYXRpb24gZm9yIGRyYWZ0c1xuICBcbiAgZXhwb3J0IGNvbnN0IHByZXZpZXdDbGllbnQgPSBjcmVhdGVDbGllbnQoe1xuICAgIC4uLmNvbmZpZyxcbiAgICB1c2VDZG46IGZhbHNlLFxuICB9KTtcbiAgXG4gIC8vIEhlbHBlciBmdW5jdGlvbiBmb3IgZWFzaWx5IHN3aXRjaGluZyBiZXR3ZWVuIG5vcm1hbCBjbGllbnQgYW5kIHByZXZpZXcgY2xpZW50XG4gIGV4cG9ydCBjb25zdCBnZXRDbGllbnQgPSAodXNlUHJldmlldykgPT5cbiAgICB1c2VQcmV2aWV3ID8gcHJldmlld0NsaWVudCA6IHNhbml0eUNsaWVudDsiXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwiY3JlYXRlSW1hZ2VVcmxCdWlsZGVyIiwiY3JlYXRlUG9ydGFibGVUZXh0Q29tcG9uZW50IiwiY3JlYXRlUHJldmlld1N1YnNjcmlwdGlvbkhvb2siLCJjb25maWciLCJwcm9qZWN0SWQiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU0FOSVRZX1BST0pFQ1RfSUQiLCJkYXRhc2V0IiwiTkVYVF9QVUJMSUNfU0FOSVRZX0RBVEFTRVQiLCJ1c2VDZG4iLCJFcnJvciIsInVybEZvciIsInNvdXJjZSIsImltYWdlIiwidXNlUHJldmlld1N1YnNjcmlwdGlvbiIsInNhbml0eUNsaWVudCIsInByZXZpZXdDbGllbnQiLCJnZXRDbGllbnQiLCJ1c2VQcmV2aWV3Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./libs/sanity.js\n");

/***/ }),

/***/ "(api)/./pages/api/bookcategories.ts":
/*!*************************************!*\
  !*** ./pages/api/bookcategories.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_sanity__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-sanity */ \"next-sanity\");\n/* harmony import */ var next_sanity__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_sanity__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _libs_sanity__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @libs/sanity */ \"(api)/./libs/sanity.js\");\n\n\nconst bookCategoryQuery = next_sanity__WEBPACK_IMPORTED_MODULE_0__.groq`\n*[_type == \"book\"] | order(order asc) {\n    _id,\n    category[]->{_id, category},\n  }\n`;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (async (req, res)=>{\n    const bookCategories = await (0,_libs_sanity__WEBPACK_IMPORTED_MODULE_1__.getClient)().fetch(bookCategoryQuery);\n    let response;\n    response = bookCategories.map((book)=>{\n        var ref;\n        let data;\n        const bkId = book._id;\n        data = (ref = book.category) === null || ref === void 0 ? void 0 : ref.map((item)=>{\n            return {\n                bookId: bkId,\n                categoryId: item._id\n            };\n        });\n        return {\n            bookIdWithCategoryId: data\n        };\n    });\n    res.status(200).json(response);\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYm9va2NhdGVnb3JpZXMudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNrQztBQUNjO0FBSWhELEtBQUssQ0FBQ0UsaUJBQWlCLEdBQUdGLDZDQUFJLENBQUM7Ozs7O0FBSy9CO0FBRUEsaUVBQU0sT0FBZ0JHLEdBQW1CLEVBQUVDLEdBQW9CLEdBQUssQ0FBQztJQUNuRSxLQUFLLENBQUNDLGNBQWMsR0FBb0IsS0FBSyxDQUFDSix1REFBUyxHQUFHSyxLQUFLLENBQUNKLGlCQUFpQjtJQUVqRixHQUFHLENBQUNLLFFBQVE7SUFDWkEsUUFBUSxHQUFHRixjQUFjLENBQUNHLEdBQUcsRUFBQ0MsSUFBSSxHQUFJLENBQUM7WUFJOUJBLEdBQWE7UUFGcEIsR0FBRyxDQUFDQyxJQUFJO1FBQ1IsS0FBSyxDQUFDQyxJQUFJLEdBQUdGLElBQUksQ0FBQ0csR0FBRztRQUNyQkYsSUFBSSxJQUFHRCxHQUFhLEdBQWJBLElBQUksQ0FBQ0ksUUFBUSxjQUFiSixHQUFhLGNBQWJBLElBQUksQ0FBSkEsQ0FBa0IsR0FBbEJBLEdBQWEsQ0FBRUQsR0FBRyxFQUFDTSxJQUFJLEdBQUksQ0FBQztZQUNqQyxNQUFNLENBQUMsQ0FBQztnQkFDTkMsTUFBTSxFQUFFSixJQUFJO2dCQUNaSyxVQUFVLEVBQUVGLElBQUksQ0FBQ0YsR0FBRztZQUN0QixDQUFDO1FBQ0gsQ0FBQztRQUVELE1BQU0sQ0FBQyxDQUFDO1lBQ05LLG9CQUFvQixFQUFFUCxJQUFJO1FBQzVCLENBQUM7SUFDSCxDQUFDO0lBSUROLEdBQUcsQ0FBQ2MsTUFBTSxDQUFDLEdBQUcsRUFBRUMsSUFBSSxDQUFDWixRQUFRO0FBQy9CLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ib29rc2FwaS8uL3BhZ2VzL2FwaS9ib29rY2F0ZWdvcmllcy50cz85NDNkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnXG5pbXBvcnQgeyBncm9xIH0gZnJvbSBcIm5leHQtc2FuaXR5XCI7XG5pbXBvcnQgeyBnZXRDbGllbnQsIHVybEZvciB9IGZyb20gXCJAbGlicy9zYW5pdHlcIjtcbmltcG9ydCBkYXRlRm9ybWF0IGZyb20gXCJkYXRlLWZucy9mb3JtYXRcIjtcbmltcG9ydCB7IElCb29rQ2F0ZWdvcnksIElCb29rQ2F0ZWdvcnlDcm9zc1JlZiwgSUJvb2tDYXRlZ29yeVJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL3R5cGVzXCJcblxuY29uc3QgYm9va0NhdGVnb3J5UXVlcnkgPSBncm9xYFxuKltfdHlwZSA9PSBcImJvb2tcIl0gfCBvcmRlcihvcmRlciBhc2MpIHtcbiAgICBfaWQsXG4gICAgY2F0ZWdvcnlbXS0+e19pZCwgY2F0ZWdvcnl9LFxuICB9XG5gO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcbiAgY29uc3QgYm9va0NhdGVnb3JpZXM6IElCb29rQ2F0ZWdvcnlbXSA9IGF3YWl0IGdldENsaWVudCgpLmZldGNoKGJvb2tDYXRlZ29yeVF1ZXJ5KTtcblxuICBsZXQgcmVzcG9uc2U6IElCb29rQ2F0ZWdvcnlSZXNwb25zZVtdXG4gIHJlc3BvbnNlID0gYm9va0NhdGVnb3JpZXMubWFwKGJvb2sgPT4ge1xuXG4gICAgbGV0IGRhdGE6IElCb29rQ2F0ZWdvcnlDcm9zc1JlZltdXG4gICAgY29uc3QgYmtJZCA9IGJvb2suX2lkXG4gICAgZGF0YSA9IGJvb2suY2F0ZWdvcnk/Lm1hcChpdGVtID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGJvb2tJZDogYmtJZCxcbiAgICAgICAgY2F0ZWdvcnlJZDogaXRlbS5faWRcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGJvb2tJZFdpdGhDYXRlZ29yeUlkOiBkYXRhXG4gICAgfTtcbiAgfVxuICApXG5cblxuICByZXMuc3RhdHVzKDIwMCkuanNvbihyZXNwb25zZSlcbn0iXSwibmFtZXMiOlsiZ3JvcSIsImdldENsaWVudCIsImJvb2tDYXRlZ29yeVF1ZXJ5IiwicmVxIiwicmVzIiwiYm9va0NhdGVnb3JpZXMiLCJmZXRjaCIsInJlc3BvbnNlIiwibWFwIiwiYm9vayIsImRhdGEiLCJia0lkIiwiX2lkIiwiY2F0ZWdvcnkiLCJpdGVtIiwiYm9va0lkIiwiY2F0ZWdvcnlJZCIsImJvb2tJZFdpdGhDYXRlZ29yeUlkIiwic3RhdHVzIiwianNvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/bookcategories.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/bookcategories.ts"));
module.exports = __webpack_exports__;

})();